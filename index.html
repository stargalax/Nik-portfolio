<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nik's Portfolio</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Georgia', serif;
      background: #000;
      color: #fff;
      overflow-x: hidden;
      overflow-y: auto;
      cursor: none;
    }

    #bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .content {
      position: relative;
      width: 100vw;
      min-height: 100vh;
      top: 50%;
      left: 50%;
      /* //transform: translate(-50%, -50%); */
      text-align: center;

      z-index: 10;
      transition: opacity 0.8s ease, transform 0.8s ease;
    }

    .content.hidden {
      opacity: 0;
      transform: translate(-50%, -50%) translateY(-50px);
      pointer-events: none;
    }

    .scroll-wrapper {
      display: flex;
      flex-direction: column;
    }


    .title {
      font-size: clamp(2rem, 8vw, 4rem);
      font-weight: normal;
      margin-bottom: 1rem;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
      letter-spacing: 0.1em;
    }

    .subtitle {
      font-size: clamp(1rem, 3vw, 1.5rem);
      opacity: 0.8;
      max-width: 600px;
      margin: 0 auto;
      line-height: 1.4;
      letter-spacing: 0.05em;
    }

    .triggers {
      margin-top: 2rem;
      font-size: clamp(1.2rem, 4vw, 2rem);
      line-height: 1.8;
    }

    .role {
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 0.2em 0.5em;
      border-radius: 5px;
      display: inline-block;
      position: relative;
    }

    .role::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 0;
      height: 100%;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.2));
      transition: width 0.3s ease;
      border-radius: 5px;
      z-index: -1;
    }

    .role:hover::before {
      width: 100%;
    }

    .role:hover {
      color: #ffd700;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      transform: scale(1.05);
    }

    .instruction {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.9rem;
      opacity: 0.6;
      z-index: 10;
      animation: pulse 2s infinite;
    }

    .top-instruction {
      position: fixed;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.9rem;
      opacity: 0.6;
      z-index: 10;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 0.6;
      }

      50% {
        opacity: 1;
      }
    }

    .custom-cursor {
      position: fixed;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      pointer-events: none;
      z-index: 1000;
      transition: transform 0.1s ease;
      mix-blend-mode: difference;
    }

    @media (max-width: 768px) {
      body {
        cursor: auto;
      }

      .custom-cursor {
        display: none;
      }

      .instruction {
        bottom: 20px;
        font-size: 0.8rem;
      }
    }
  </style>
</head>

<body>
  <canvas id="bg"></canvas>
  <div class="top-instruction" id="topInstruction">Scroll down â†“</div>

  <div class="custom-cursor" id="cursor"></div>
  <div class="scroll-wrapper">
    <div class="content" id="screen1">
      <h1 class="title">Hi I'm Nik</h1>
      <p class="subtitle">4th year student from India who knows a lil bit about everything!</p>
    </div>

    <div class="content hidden" id="screen2">
      <h1 class="title">ARE YOU A...</h1>
      <div class="triggers">
        <span class="role" id="role0">Front End Dev</span> |
        <span class="role" id="role1">SWE</span> |
        <span class="role" id="role2">Data Scientist / Analyst</span>
      </div>
    </div>
  </div>

  <div class="instruction" id="instruction">Move your mouse to create shooting stars</div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    const screen1 = document.getElementById('screen1');
    const screen2 = document.getElementById('screen2');
    const instruction = document.getElementById('instruction');
    const topInstruction = document.getElementById('topInstruction');
    let current = 1;

    window.addEventListener('wheel', () => {
      if (current === 1) {
        screen1.classList.add('hidden');
        screen2.classList.remove('hidden');
        instruction.style.opacity = '0';

        topInstruction.textContent = 'Please select the role for which you want to see the portfolio';

        current = 2;
      }
    });

    document.getElementById('role0').onclick = () =>
      window.location.href = 'dist/second.html';
    document.getElementById('role1').onclick = () =>
      window.location.href = 'https://live-resume-bynik.streamlit.app/';
    document.getElementById('role2').onclick = () =>
      window.location.href = 'https://live-resume-bynik.streamlit.app/';

    // === Custom Cursor ===
    const cursor = document.getElementById('cursor');
    let cursorX = 0, cursorY = 0;

    document.addEventListener('mousemove', (e) => {
      cursorX = e.clientX;
      cursorY = e.clientY;
      cursor.style.left = cursorX - 10 + 'px';
      cursor.style.top = cursorY - 10 + 'px';
    });

    // === Shooting Star Effect ===
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 200;

    const renderer = new THREE.WebGLRenderer({
      canvas: document.getElementById('bg'),
      antialias: true,
      alpha: true
    });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setClearColor(0x000000, 1);

    // Simplified shooting star system
    const particleCount = 10000;
    const geometry = new THREE.BufferGeometry();
    const positions = new Float32Array(particleCount * 3);
    const velocities = new Float32Array(particleCount * 3);
    const ages = new Float32Array(particleCount);
    const maxAge = new Float32Array(particleCount);

    // Initialize particles
    for (let i = 0; i < particleCount; i++) {
      positions[i * 3] = 0;
      positions[i * 3 + 1] = 0;
      positions[i * 3 + 2] = 0;

      velocities[i * 3] = 0;
      velocities[i * 3 + 1] = 0;
      velocities[i * 3 + 2] = 0;

      ages[i] = 100; // Start "dead"
      maxAge[i] = Math.random() * 60 + 30; // 30-90 frames lifetime
    }

    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

    // Simple point material
    const material = new THREE.PointsMaterial({
      color: 0xffaa44,
      size: 3,
      transparent: true,
      opacity: 0.8,
      blending: THREE.AdditiveBlending,
      sizeAttenuation: false
    });

    const points = new THREE.Points(geometry, material);
    scene.add(points);

    // Particle system variables
    let mouseX = 0;
    let mouseY = 0;
    let lastMouseX = 0;
    let lastMouseY = 0;
    let particleIndex = 0;

    function createParticle(x, y) {
      const i = particleIndex % particleCount;

      // Convert screen coordinates to world coordinates
      const worldX = (x / window.innerWidth) * 400 - 200;
      const worldY = -(y / window.innerHeight) * 300 + 150;

      positions[i * 3] = worldX;
      positions[i * 3 + 1] = worldY;
      positions[i * 3 + 2] = (Math.random() - 0.5) * 20;

      // Add some spread and velocity
      const spread = 20;
      velocities[i * 3] = (Math.random() - 0.5) * spread;
      velocities[i * 3 + 1] = (Math.random() - 0.5) * spread;
      velocities[i * 3 + 2] = Math.random() * 10 - 5;

      ages[i] = 0;

      particleIndex++;
    }

    function updateParticles() {
      for (let i = 0; i < particleCount; i++) {
        if (ages[i] < maxAge[i]) {
          // Update position
          positions[i * 3] += velocities[i * 3] * 0.5;
          positions[i * 3 + 1] += velocities[i * 3 + 1] * 0.5;
          positions[i * 3 + 2] += velocities[i * 3 + 2] * 0.5;

          // Apply some drag
          velocities[i * 3] *= 0.98;
          velocities[i * 3 + 1] *= 0.98;
          velocities[i * 3 + 2] *= 0.98;

          ages[i]++;
        }
      }

      geometry.attributes.position.needsUpdate = true;
    }

    function drawShootingStar(clientX, clientY) {
      const currentMouseX = clientX + window.innerWidth / 2;
      const currentMouseY = clientY + window.innerHeight / 2;

      // Create particles along the mouse path
      const distance = Math.sqrt(
        Math.pow(currentMouseX - lastMouseX, 2) +
        Math.pow(currentMouseY - lastMouseY, 2)
      );

      const numParticles = Math.min(Math.floor(distance / 5), 10);

      for (let i = 0; i <= numParticles; i++) {
        const ratio = numParticles > 0 ? i / numParticles : 0;
        const x = lastMouseX + (currentMouseX - lastMouseX) * ratio;
        const y = lastMouseY + (currentMouseY - lastMouseY) * ratio;
        createParticle(x, y);
      }

      lastMouseX = currentMouseX;
      lastMouseY = currentMouseY;
    }

    // Mouse event listeners
    document.addEventListener('mousemove', (e) => {
      drawShootingStar(
        e.clientX - window.innerWidth / 2,
        e.clientY - window.innerHeight / 2
      );
    });

    // document.addEventListener('touchmove', (e) => {
    //   e.preventDefault();
    //   const touch = e.touches[0];
    //   drawShootingStar(
    //     touch.clientX - window.innerWidth / 2,
    //     touch.clientY - window.innerHeight / 2
    //   );
    // });
    document.addEventListener('touchmove', (e) => {
      if (e.touches.length === 1) {
        const touch = e.touches[0];
        drawShootingStar(
          touch.clientX - window.innerWidth / 2,
          touch.clientY - window.innerHeight / 2
        );
      }
    }, { passive: true });


    // Animation loop
    function animate() {
      requestAnimationFrame(animate);

      updateParticles();
      renderer.render(scene, camera);
    }

    // Resize handler
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // Start animation
    animate();

    // Initial animation sequence
    setTimeout(() => {
      const period = Math.PI * 3;
      const amplitude = Math.min(Math.max(window.innerWidth * 0.1, 100), 180);
      const duration = 2000;
      const startTime = Date.now();

      function initialAnimation() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);

        if (progress < 1) {
          const x = Math.cos(progress * period) * amplitude;
          const y = (progress * window.innerHeight - window.innerHeight / 2) * 0.8;

          drawShootingStar(x, y);
          requestAnimationFrame(initialAnimation);
        }
      }

      initialAnimation();
    }, 500);
  </script>
</body>

</html>